version: '3.5'
services:
  catalog:
    build: ./catalog
    expose:
    - "80"
    ports:
    - "8080:80"
    volumes:
    - ./catalog/catalog.json:/app/catalog.json
  node-red:
    build: ./node-red
    ports:
      - "8082:8082"
    depends_on: 
      - catalog    
    links:
      - catalog
  security:
    build: ./security
    expose:
      - "30"
    ports:
      - "30:30" 
    depends_on:
      - catalog 

  nodered-dashboard:
    image: nodered/node-red
    container_name: nodered-dashboard
    ports:
      - "1880:1880"
    restart: unless-stopped 

  thingspeak_adaptor:
    build: ./thingSpeak adaptor  
    expose:
      - "9090"
    ports:
      - "9090:9090" 
    depends_on:
      - catalog  
    links:
      - catalog 

  threshold_management:
    build: ./threshold management 
    expose:
      - "8081"
    ports:
      - "8081:8081"  
    depends_on:
      - catalog  
      - thingspeak_adaptor  
    links:
      - catalog 
      - thingspeak_adaptor  
